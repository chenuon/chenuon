---
title: xls系统开发(5)：数据更改生成记录日志
date: 2020-02-16 17:03:10
top:
categories:
- xls开发
tags:
- 云表
---

## 一、开发主题

部分表单模板需要针对其中的数据更改做出记录，以便于后期查询

## 二、开发过程

此次开发差点让我陷入崩溃，坐在办公室抽了半包烟，硬坐了5个小时没实现，昨天半夜12点了，人确实很累了，

脑袋也蒙蒙的，转不动了，所以就休息了，今天早上看了一下资料，突然冒出灵感

目前存在的问题就是填表公式和业务公式的逻辑顺序关系无法解决，导致日志生成记录混乱，

要么不记录，要么重复记录，因此，开始如下测试：

> 新建测试模板，了解各个公式的优先顺序，得出结论：
>
> > `[填表公式]保存表单前`事件>`[业务公式]保存后事件`>`[填表公式]保存表单后`事件

由此，豁然开朗，正确开发过程如下：

#### 保存表单前[填表公式]

在表单模板新增`[填表公式]保存表单前`事件，选择`提示框`来进行条件检查，确定是否执行后续内容

#### 保存表单后[业务公式]

新增`[业务公式]保存表单后`事件，将更新内容返回日志列表

## 三、拓展思考

如果一个表单有多个数据更改，上述每个公式都需要作出单独的重复动作，不可同时进行

自己也没想到原来如此简单，世界如此美好！

over && 未完待续....【待优化修复】

